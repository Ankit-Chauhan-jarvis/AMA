[
    {
        "speaker": "SPEAKER_03",
        "start": 1.9,
        "end": 11.52,
        "text": "Hey everyone, this is the environments design pairing session on October 26th and Anna has the first topic so I'll pass it over to her to introduce."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 12.72,
        "end": 81.0,
        "text": "Thank you. I wanted to discuss a few things related to the Void GPI for the Kubernetes resources. So I was playing with it yesterday, and I had a couple of questions here. So when we do the watch request, the API expects the data may appear even if it's not there yet. So for example, if I choose the pods in the selected namespace, they might not be present there, but we will still wait for five minutes as the five minutes is the Kubernetes limit for them to appear. And currently, we're showing the loading animation for the whole five minutes and after having the timeout, we render the zero pod state, which I guess it's not the best way to handle it. So I was thinking probably we could start with showing zero. But then we'll probably want to indicate somehow that we're still loading."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 83.52000000000001,
        "end": 101.3,
        "text": "So it's like at the start, we want to, like, it will load for five minutes and then show zero. But in those five minutes, it's kind of in the state that no one, the user won't know kind of what's happening. That's true. That's not like the best case. And it's,"
    },
    {
        "speaker": "SPEAKER_01",
        "start": 101.82,
        "end": 103.54,
        "text": "oh, sorry, sorry."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 104.16,
        "end": 112.78,
        "text": "No worries. And it'll take the full five minutes to time out. There's nothing we can kind of do before that, right? Yeah."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 114.77999999999999,
        "end": 132.26,
        "text": "What I was thinking, that you proposed a bit alternative approach for the flux resource, which is that firstly query the resource and after we sign up for the watch, would this be an option for the pods as well?"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 133.78,
        "end": 134.84,
        "text": "Yeah, we can do that."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 137.0,
        "end": 189.1,
        "text": "And then you, there you wrote one more thing, which was that, yeah, it's easier to implement. I didn't understand if you don't do this, but go with a single one and there is less fetch requests. But, but here we would have two requests per resource, like for the pods and for flux. First, I don't consider it too many. And the other is that they would be sequential so that we run the first, it returns, then we do the next. It doesn't return because it's, it's the watch, but so to me, it doesn't feel to be a big issue that we are doing these sequential requests. And I would like to know if I'm correct or wrong with this."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 192.36,
        "end": 212.56,
        "text": "I think it should be fine. If you're querying on the four pods and the flux resource there. So for flux, we all also have a logic of searching for, for customization. And if it's not there searching for the hand release, so it would be probably three requests."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 213.42000000000002,
        "end": 239.58,
        "text": "I might. So, yeah, I think that was just a bad idea from me on the first place to, to ask for that logic. I wrote it already somewhere in the comments. I think we can just remove from that idea. We can remove that logic altogether and say that like, if you selected something, we go with that. Otherwise, you are on your own. So if you don't do anything like that."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 239.7,
        "end": 242.78,
        "text": "Yeah. That makes sense. That would help."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 244.64000000000001,
        "end": 249.08,
        "text": "Yeah. Let's do that. I will take a note of it here somewhere."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 250.06,
        "end": 250.5,
        "text": "Okay."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 261.64,
        "end": 264.92,
        "text": "Does that answer the first question? Yeah. I"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 264.92,
        "end": 287.02,
        "text": "think so. So if we decide to go with a similar approach for the pods as well, you're just going to implement this first color to just check if anything is there. And if it is, we can watch for the changes."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 287.74,
        "end": 293.0,
        "text": "Cause then we'd show right away. There's like zero pods. And then they'd. Yeah. I think that would."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 295.32,
        "end": 299.16,
        "text": "That would be cool. Cool. Cool. Then. You have a few"
    },
    {
        "speaker": "SPEAKER_01",
        "start": 299.16,
        "end": 299.98,
        "text": "more questions there."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 300.8,
        "end": 341.04,
        "text": "Yeah. I was also thinking about the refreshing the stream. So currently we have it for five minutes. If no error occurs. And I'm not sure if you want to resubscribe right away, for example, on the environment page, you could open like 10 environments at a time and. You can do, you can do it. So I think it's already like five requests, I guess, from each one. So. I was thinking about having some kind of an icon. For the user to press if they want it to load. Fresh data there."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 345.82000000000005,
        "end": 346.40000000000003,
        "text": "That"
    },
    {
        "speaker": "SPEAKER_00",
        "start": 346.40000000000003,
        "end": 353.6,
        "text": "one. Are we, are we concerned about the performance on the client side or hitting the server with so many. Requests."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 357.26,
        "end": 373.62,
        "text": "I guess kind of both. It's also for concern on the Kubernetes dashboard pages, because it's mainly one resource per page, but on the environment's page, it could be. A bunch of requests."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 392.04,
        "end": 413.3,
        "text": "In the environment. So. That's kind of a, Yeah. So. I wanted to ask this even before, but like, like do we run these requests in a worker or on the main UI thread? Like, because if you are concerned about the client side, then. Putting it in a worker might help. solve it."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 414.82,
        "end": 421.38,
        "text": "Yeah, we do it on the new alt thread right now. You might want to reconsider it."
    },
    {
        "speaker": "SPEAKER_00",
        "start": 425.5,
        "end": 436.78,
        "text": "We trigger some of these requests based off of the visibility of the tab as well. I know we use that a lot in like the old polling style stuff. Yeah, that's"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 436.78,
        "end": 437.02,
        "text": "true."
    },
    {
        "speaker": "SPEAKER_00",
        "start": 441.04,
        "end": 451.26,
        "text": "And I think the browser has a lot of stuff built in surrounding like delaying requests if a tab is invisible as well, especially on lower power devices, right?"
    },
    {
        "speaker": "SPEAKER_01",
        "start": 452.94,
        "end": 456.42,
        "text": "Yeah, I think so. Yeah."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 467.02,
        "end": 478.12,
        "text": "Do we show anywhere where things have been last updated? So when you mentioned adding a refresh icon to the UI, do they know to like hit that after five minutes? Like, are we showing that anywhere?"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 479.68,
        "end": 491.62,
        "text": "No, we currently don't show it anywhere. Because I feel like it's just the data being updated in the pod section, and I'm also working on updating it in the fluxing status section."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 493.46,
        "end": 500.08,
        "text": "Because I think an important aspect of that might be to also show last updated and then give them the option to so."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 502.0,
        "end": 503.14,
        "text": "Yeah, that makes sense."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 510.82,
        "end": 646.62,
        "text": "Okay, let me take a step back and tell you a few thoughts I have around this. And Emily, I would love to hear your thoughts primarily, because my impression is that we might introduce a confusing, user interface. And at the same time, complexity on the code side, which is like, why? I would say why I'm worried about the confusing user experience, which is that we discussed that we would make the watch API for the pods, and for the flux resource reconciliation status only. But that page shows the deployment stateful sets in different tabs. And I think that's a really good point. I think that's the way we did this, and I'm happy to see it in the game room. Alright, for all of us, we have the video now from the session we send the first time. But we would like to have a much betteracio session. We would also recommend that if you're gunnery, check out the we have tools, ouais, 05 friend of mine is unofficial and I would say if you're willing to do anything with maintainers, Lindsay, you definitely have a deft point. Yes, we can actually add the watch API even later saying that with an icon showing that these data are continuously watched while the other data are not. And then once the watch is done, we remove those watch icons and there is the refresh button again to subscribe, for example. But what I'm worried about is that it might be a bit confusing. And that's why I think your last question that we need an indicator for the pods and for the flux sync status, that it's being watched continuously. At the same time, the refresh button should be about the whole not page because it's just an accordion, but the whole section that we refresh all the data, I think. And this was my rant on these topics. What do you think? I don't know. What do you think about this?"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 647.98,
        "end": 675.98,
        "text": "That makes sense. I was also thinking of using watch API for pods and for flux just as a first iteration so that we can edit for every resource type. And if we keep the logic of requesting it once so we can save us a lot of watch API calls for the resources that are not needed, then it would be more obvious from the UI. And so I think these пост time implementations with refresh that make them think in the"
    },
    {
        "speaker": "SPEAKER_03",
        "start": 681.28,
        "end": 718.02,
        "text": "So then like other workloads here, I always explain that to myself that everything is 기본 honey in bees use thread function. concern. And I think if it refreshed everything in that container, that would be the ideal case. Because I think having a refresh icon that only refreshes some of the data is not a good experience."
    },
    {
        "speaker": "SPEAKER_02",
        "start": 720.0400000000001,
        "end": 720.9,
        "text": "I agree."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 726.32,
        "end": 757.04,
        "text": "Okay, then just to summarize the whole discussion. And see whether we are on the same page. So one thing is to make two sequential calls when we watch something, one to query and then start watching. We will start watching only if there was a response, or we start watching anyway, and we just show a zero number, the latter. We would start watching anyway, and we just show that there are zero points right now, right?"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 759.28,
        "end": 771.74,
        "text": "If we expect this to change, we could show... Yeah. We could watch anyway. But for flux resources, probably we are by name. So if it's not there, it probably won't be there."
    },
    {
        "speaker": "SPEAKER_00",
        "start": 772.36,
        "end": 772.84,
        "text": "Yeah."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 796.8199999999999,
        "end": 825.96,
        "text": "Correct. Yeah. Okay. And then for the refresh, we do not auto reconnect to the watch API. But we will have a refresh button that refreshes the whole container and icons to show that pods and flux are being watched. Okay, great. Thanks. You're welcome. Was that a proper summary?"
    },
    {
        "speaker": "SPEAKER_03",
        "start": 827.36,
        "end": 829.08,
        "text": "I think so. Yes."
    },
    {
        "speaker": "SPEAKER_00",
        "start": 829.64,
        "end": 842.92,
        "text": "I think we might want to watch still if there are zero pods because you can see a person showing up to a page, like expecting to watch all their pods roll out."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 846.6200000000001,
        "end": 870.7,
        "text": "Yeah, definitely. So yeah, I think that's what I wrote up as well. The top that for Flux, we don't watch if there is no response, basically, or no Flux resource. But for the pods, we do start to watch. Yeah. Yeah. Cool."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 873.36,
        "end": 882.76,
        "text": "So next steps for me, Anna, do you need my help with any of this? And if so, what should I kind of do after this meeting to move it forward?"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 883.5400000000001,
        "end": 914.92,
        "text": "Yeah, I really need your help on placing this icon and maybe showing different states of the icon. So we probably don't want the user to refresh it before the timeout, but it could be also confusing if we do refresh the watch API together with just single calls. Is there any... It would be much easier when we do that. So I can just do the watch API for the whole section."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 915.88,
        "end": 920.22,
        "text": "Cool. Is there an issue open about this too, or should we open something?"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 921.0600000000001,
        "end": 921.58,
        "text": "I'll"
    },
    {
        "speaker": "SPEAKER_03",
        "start": 921.58,
        "end": 921.84,
        "text": "create"
    },
    {
        "speaker": "SPEAKER_02",
        "start": 921.84,
        "end": 922.64,
        "text": "an issue after"
    },
    {
        "speaker": "SPEAKER_03",
        "start": 922.64,
        "end": 924.28,
        "text": "the meeting. Cool. Sounds good."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 931.66,
        "end": 933.68,
        "text": "Thank you, Anna, for the questions."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 935.14,
        "end": 979.78,
        "text": "Yeah, thank you. It's really helpful. Yeah. Thanks for bringing a topic to the DesignPair. Yeah. Awesome. Does anyone have any other comments or questions on this? If not, I know we're kind of getting to the... This is a shorter DesignPair session today because Victor and I have a product direction showcase next. So if there's no other questions, we can end it soon. Yeah. I think we should have a little bit of time to wrap up slightly earlier. Cool. Well, I hope everyone has a great rest of your day."
    },
    {
        "speaker": "SPEAKER_01",
        "start": 981.92,
        "end": 982.6,
        "text": "Bye. Bye."
    },
    {
        "speaker": "SPEAKER_03",
        "start": 982.98,
        "end": 985.54,
        "text": "Bye. Thank you. Bye. Bye."
    }
]